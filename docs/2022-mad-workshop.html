<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=yes">

	<title>Workshop: MLOps MAD 2022</title>

	<link rel="stylesheet" href="revealjs/reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="revealjs/reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="revealjs/reveal.js/dist/theme/white.css" />

    <!-- Theme used for syntax highlighted code -->
	<!-- <link rel="stylesheet" href="revealjs/reveal.js/plugin/highlight/monokai.css"> -->
	<!-- <link rel="stylesheet" href="revealjs/reveal.js/plugin/highlight/zenburn.css"> -->
    <link rel="stylesheet" href="revealjs/highlight-js-github-theme.css" />
    <link rel="stylesheet" href="revealjs/styles.css" />

</head>

<body style="background-color: whitesmoke;">
	<div class="reveal">
		<div class="slides">

<!-- 
https://mad-summit.de/fundamentals/mlops-wo-machine-learning-auf-softwareentwicklung-trifft/

MLOps – wo Machine Learning auf Softwareentwicklung trifft

Machine Learning kann sowohl mit dem Ziel des Erkenntnisgewinns als auch mit dem Ziel einer Vorhersage betrieben werden.
Während Erkenntnisgewinne eher im Bereich Data Science oder Statistik angesiedelt sind, kann eine Vorhersage auch wie
ein klassisches Stück Business-Logik eingesetzt werden. In diesem Bereich der Vorhersagen gibt es viele Überschneidungen
mit klassischer Softwareentwicklung und der DevOps-Bewegung, allerdings auch einige Besonderheiten.

In diesem Workshop sehen wir uns unabhängig von der Programmiersprache den Bereich des Machine Learnings durch die
Brille der Softwareentwicklung an.
-->

<!-- <section data-markdown class="todo">
	<textarea data-template>
### Erkenntnisse nach Fortiss Hotspot MLOps

1. Story klarer kriegen
  * Drift detektieren bevor man ground truth hat
  * ODER
  * Detektieren wann man neue Ground Truth sammeln und neu trainieren sollte

2. Deployment Strategien klären
  1. Deploy Permanently VS
  2. Deploy when you need to
  
3. In Iterationen vorgehen
  1. Erst einmal die Story komplett durchgehen
  1. Dann Details
  </textarea>
</section>
 -->

<!-- <section data-markdown class="todo">
	<textarea data-template>
### Bias / Fairness

* Über der Oberfläche
  * Widersprüchliche Metriken
  * Accuracy-Fairness-Tradeoff
  * Bias bereits in Trainingsdaten
  * Wer entscheidet was Fair ist?
  * Gruppenbasierte vs individuelle Fairness
* Unter der Oberfläche
  * Proxy Variablen (nicht Einkommen oder Alter, sondern PLZ)
  * Data- oder Concept-Drift
  * Ist eine algorithmische Lösung möglich und angemessen
  * Einspruch gegen algorithmische Entscheidung möglich?
  * Keine Ground-Truth in Production
  * Datenschutz vs Fairness
  * Nützt Fairness dem Geschäft?
  * Beim manuellem Labelling können Labels Weltanschauung in Bias der Annotierenden enthalten
  * Zementierung bestehender Machtstrukturen
  * Unmöglichkeit eindeutiger Kategorisierung (z.B. Geschlecht, sexuelle Orientierung)
</textarea>
</section>

 -->
<section data-markdown class="preparation">
	<textarea data-template>
### Vorbereitung

* Stift einsatzbereit (geladen)
* Probelauf Drift Detection
* Installation einmal platt machen: `docker compose down --volumes --rmi all`
* Und wieder hoch fahren dabei alles neu bauen und alle images neu ziehen: `docker compose up --build`
</textarea>
</section>
`
<section data-markdown class="todo">
  <textarea data-template>
### Material

Pro Team
1. Ein Würfel
1. Einen Satz von Zetteln
   1. Überblick: wie Spielbrett hier https://miro.com/app/board/uXjVPPE7mCg=/
   1. Entscheidung welcher ML Ansatz
   1. Kosten / Gewinn Ereignisse
1. Geldsteine pro Spieler oder anderen Mechanismus
  </textarea>
</section>


			<section data-markdown>
				<textarea data-template>
# MLOps – wo Machine Learning auf Softwareentwicklung trifft

MAD 2022, https://mad-summit.de/fundamentals/mlops-wo-machine-learning-auf-softwareentwicklung-trifft/

Hanna Lüschow / hanna.lueschow@openknowledge.de

Oliver Zeigermann / oliver.zeigermann@openknowledge.de

Folien: https://bit.ly/mad-2022-mlops
    </textarea>
			</section>

<section data-markdown>
  <textarea data-template>
### Wer ist Hanna

<img src='img/Hanna-Lueschow-6.jpg'>

<p>
<a target="_blank" href="mailto:hanna.lueschow@openknowledge.de">Hanna Lüschow</a>:
Dev@OPEN KNOWLEDGE
</p>    
</textarea>
</section>

<section data-markdown>
  <textarea data-template>
### Wer ist Olli

<img src='img/olli-opa.jpeg'>

<p>
<a target="_blank" href="mailto:oliver.zeigermann@openknowledge.de">Oliver Zeigermann</a>:
ML Architekt@OPEN KNOWLEDGE
</p>    
</textarea>
</section>

<section data-markdown>
	<textarea data-template>
### Gruppen

1. Tut euch mit euren Nachbarn in Gruppen von ca. 5 Menschen zusammen
1. Stellt euch kurz einander vor, z.B.
  * Was macht ihr?
  * Was wisst ihr schon?
  * Warum seid ihr hier?
</textarea>
</section>

<section data-markdown>
	<textarea data-template>
## Ablauf

### Teil I: Vorbereitung
1. Anwendung und Daten
1. Story, Überblick Vogelperspektive
1. Exkursion: ML Ansätze
1. Spielvorbereitung: ML Ansatz auswählen

### Teil II: Betrieb
1. Exkursion: Produktion, Drift, Statistik
1. Spielverlauf: Model in Produktion betreiben
1. Bericht / Auswertung
</textarea>
</section>

<section data-markdown>
  <textarea data-template>
# Teil I

Vorbereitung
  </textarea>
</section>

<section data-markdown>
	<textarea data-template>
## Anwendung und Daten

<a href="./2022-mad-exkursion-fallbeispiel.html">Anwendung und Daten</a>
</textarea>
</section>

<section data-markdown>
	<textarea data-template>
## Story, Überblick Vogelperspektive

### Blatt I

<!-- <a href="https://miro.com/app/board/uXjVPPE7mCg=/?share_link_id=235653251419">Story, Überblick Vogelperspektive</a> -->
</textarea>
</section>

<section data-markdown>
	<textarea data-template>
## Exkursion: ML Ansätze

<a href="./2022-mad-exkursion-ml-ansaetze.html">Exkursion: ML Ansätze</a>
</textarea>
</section>

<section data-markdown>
	<textarea data-template>
## Spielvorbereitung: ML Ansatz auswählen

### Blatt II - Welches Modell bringst du in Produktion?

</textarea>
</section>

<section data-markdown`>
<textarea data-template>
### Bericht der Gruppen

* Wir haben unterschiedliche Modelle mit unterschiedlichen Eigenschaften
* Welcher Ansatz passt am ehesten?
* Welche Kompromisse gehst du ein?
</textarea>
</section>

<section data-markdown>
  <textarea data-template>
# Teil II

Betrieb
  </textarea>
</section>


<section data-markdown>
  <textarea data-template>
### Wie kann man ML in Produktion bringen?

<img src="img/Typical_Deployment_of_a_Machine_Learning_Service.PNG">
</textarea>
</section>


<section data-markdown>
	<textarea data-template>
## Exkursion: Produktion, Drift, Statistik

<a href="./2022-mad-exkursion-drift.html">Exkursion: Produktion, Drift, Statistik</a>
</textarea>
</section>


<section data-markdown>
	<textarea data-template>
## Spielverlauf: Model in Produktion betreiben

### Blatt III: Kosten/Gewinn, Ereignisse

</textarea>
</section>

<section data-markdown>
  <textarea data-template>
### 5 Runden spielen

* Gewinn: Accuracy minus Baseline (raten) mal 15 pro Runde aufgerundet, z.B.
  * (0,85 - 0,3) * 15 = _9_
  * (0,6 - 0,3) * 15 = _4_

* Kosten: Ressourcen
  1. DL: 4 Geld pro Runde
  1. DT: 2 Geld pro Runde
  1. KNN: 4 Geld pro Runde
  1. Regelsystem: 2 Geld pro Runde
  
* Kosten: Aktionen
  * Daten beschaffen  
    * initial: 10 Geld
    * später: 5 Geld
  * Passenden ML Ansatz designen: 5 Geld
  * Extrakosten Deep Learning Ansatz designen (jede Iteration braucht länger und bessere Hardware): 5 Geld 
  * Modell nachtrainieren: 2 Geld
  </textarea>
</section>

<section data-markdown>
  <textarea data-template>
### Exemplarischer Spielverlauf

* Hanna: 25
  * - 10 Geld, Daten beschaffen
  * Start:
    * Geld 15
    * Gewinn / Runde: 4
    * Kosten: 1 
  * Runde 1: Drift
    * Geld: 13
    * Gewinn / Runde: 4
    * Kosten: 1
  * Runde 2: Drift
    * Geld: 13 + 4 - 1 - 5 = 11
    * Gewinn / Runde: 4
    * Kosten: 1
  * Runde 3: Nix
    * Geld: 11 + 4 - 1 = 14
    * Gewinn / Runde: 4
    * Kosten: 1
  * Runde 4: Last steigt
    * Geld: 14 + 4 - 1 = 17
    * Gewinn / Runde: 4
    * Kosten: 2
  * Runde 5: Nix
    * Geld: 17 + 4 - 2 = 19
    * Gewinn / Runde: 4
    * Kosten: 2

* Olli: 25
  * - 10 Geld, Daten beschaffen
  * - 5 Geld, ML Ansatz
  * - 5 Geld, DL Ansatz
  * Start:
    * Geld 5
    * Gewinn / Runde: 9
    * Kosten: 2
  * Runde 1: Last sinkt
    * Geld: 12
    * Gewinn / Runde: 9
    * Kosten: 1
  * Runde 2: Drift
    * 12 + 9 - 1 - 7 = 13
    * Gewinn / Runde: 9
    * Kosten: 1
  * Runde 3: Last steigt
    * Geld: 13 + 9 - 1 = 21
    * Gewinn / Runde: 9
    * Kosten: 2
  * Runde 4: Last sinkt
    * Geld: 21 + 9 - 2 = 28
    * Gewinn / Runde: 9
    * Kosten: 1
  * Runde 5: Nix
    * Geld: 28 + 9 - 1 = 36
    * Gewinn / Runde: 9
    * Kosten: 1

</textarea>
</section>


  <section data-markdown>
    <textarea data-template>
### Ereignisse

Normaler Würfel, 6 Seiten

1. (1) Last Verändert sich
  1. (1-3) Last steigt: Ressourcen werden teuer, mal 2, max 10
  1. (4-6) Last sinkt: Ressourcen werden billiger, durch 2, min 1
1. (2-3) Übles Ereignis
  * Nochmal würfeln
  * Je nach Ergebnis einen der 4 Buzzer abfeuern
  1. (1-2) Kunden fordern Erklärung
     * Notabschaltung und Fallback auf Regelsystem wenn Erklärbarkeit nicht gegeben ist
  1. (3-4) Investigativer Journalismus: Bias / Alterdiskriminierung
     * Notabschaltung und Fallback auf (Not-)Regelsystem wenn Alter für Vorhersage zwingend notwendig ist
  1. (5) Adversarial Attack: Angreifer versuchen die Vorhersage zu manipulieren
     * wenn deine Decision Boundaries simpel (d.h. gerade Linien) sind, funktioniert dies leicht, aber du bemerkst den Schaden erst spät, da kein Drift vorliegt, in diesem Fall gehst du pleite
  1. (6) Hackerangriff
     * Du bist aus dem Geschäft wenn du Kundendaten in Produktion hast
1. (4-5) Die Welt ändert sich, Drift setzt ein
  * Du musst neue Daten beschaffen: x Kosten
  * Falls Regelsystem, keine weiteren Kosten, da direkte Anpassung
  * Nochmal würfeln
    1. (1-2) Das Modell performant auf den neuen Daten immer noch super, keine weiteren Aktionen und Kosten erforderlich
    1. (3-4) Es muss mit neuen Daten trainiert werden, das langt aber: 
       * doppelte Kosten wenn Modell nicht stabil
    1. (5) Dramatischer Absturz der Performance: Notabschaltung und zurück zu Regelsystem, Accuracy dementsprechend dauerhaft runter
    1. (6) Neue Modell-Architektur mit vertretbarem Aufwand stellt ursprüngliche Performance wieder her: Kosten für Passenden ML Ansatz designen (auch bei DL nur einfach)
1. (6) Es läuft alles rund
  </textarea>
  </section>
  
<section data-markdown class="fragments">
<textarea data-template>
### Bericht der Gruppen

1. Wer hat mit welchem Modell gewonnen?
1. Welche üblen Ergebnisse sind eingetreten
1. Wart ihr zufrieden mit der Auswahl des Modells?
1. Habt ihr Gewinn gemacht?
</textarea>
</section>


<section data-markdown class="fragments">
<textarea data-template>
### Zusammenfassung

1. Machine Learning Projekte können in Phasen gedacht werden
1. In der ersten Phase macht man möglichst schnelle Experimente
1. Sollte sich eine Idee als tragfähig erweisen, professionalisiert man die Idee
1. Dies ist Voraussetzung und Grundlage für Produktion
1. In Produktion ergeben sich besondere Herausforderung im Bereich Monitoring
1. Typischerweise müssen Machine Learning Systeme regelmäßig nachtrainiert und gepflegt werden
</textarea>
</section>

		<section data-markdown>
			<textarea data-template>
# Vielen Dank

MLOps – wo Machine Learning auf Softwareentwicklung trifft

Bleibt gern im Kontakt

Hanna Lüschow / hanna.lueschow@openknowledge.de

Oliver Zeigermann / oliver.zeigermann@openknowledge.de
https://www.linkedin.com/in/oliver-zeigermann-34989773/
https://twitter.com/DJCordhose

</textarea>
		</section>

		</div>
	</div>
	<script src="revealjs/reveal.js/dist/reveal.js"></script>
	<script src="revealjs/reveal.js/plugin/notes/notes.js"></script>
	<script src="revealjs/reveal.js/plugin/markdown/markdown.js"></script>
	<script src="revealjs/reveal.js/plugin/highlight/highlight.js"></script>
	<script src="revealjs/config.js"></script>


</body>

</html>